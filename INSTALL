1.
after you clone and enter the surge directory you apply the first patch:
diff.diff.gz
with this command:
patch -Np1 -i ../diff.diff
2.
git submodule update --init --recursive
3.
cd vst3sdk
rm -fr vstgui4
git clone https://github.com/steinbergmedia/vstgui.git
mv vstgui vstgui4
4.
Find the corresponding files and make the changes(-,+) MANUALLY.
Sorry I could n't make a patch that works...

--- a/vstgui/plugin-bindings/aeffguieditor.cpp
+++ b/vstgui/plugin-bindings/aeffguieditor.cpp
@@ -74,7 +74,7 @@ bool AEffGUIEditor::onKeyUp (VstKeyCode& keyCode)
//-----------------------------------------------------------------------------
void AEffGUIEditor::draw (ERect* ppErect) {
-#if VSTGUI_ENABLE_DEPRECATED_METHODS
+#if 0 //VSTGUI_ENABLE_DEPRECATED_METHODS

diff --git a/vstgui/vstgui_linux.cpp b/vstgui/vstgui_linux.cpp
index 8d7faa3..47622e9 100644
--- a/vstgui/vstgui_linux.cpp
+++ b/vstgui/vstgui_linux.cpp

@@ -13,3 +15,41 @@
#include "lib/platform/linux/cairopath.cpp"

-#include "lib/platform/common/fileresourceinputstream.cpp"
+#include "lib/platform/common/genericoptionmenu.cpp"
+#include "lib/platform/common/generictextedit.cpp"
+#include "lib/platform/linux/x11utils.cpp"

diff --git a/vstgui/lib/platform/linux/x11platform.cpp b/vstgui/lib/platform/linux/x11platform.cpp
index 6fe94e6..ed0e8a1 100644
--- a/vstgui/lib/platform/linux/x11platform.cpp
+++ b/vstgui/lib/platform/linux/x11platform.cpp
@@ -142,6 +252,8 @@ uint64_t Platform::getCurrentTimeMs ()
//------------------------------------------------------------------------
std::string Platform::getPath () {
+return impl->path;
+#if 0
if (impl->path.empty () && soHandle) {
struct link_map* map;
@@ -165,6 +277,7 @@ std::string Platform::getPath ()
}
}
return impl->path;
+#endif
}

Now you should merge the vst2_sdk files (pluginterfaces and public.sdk) into your vst3sdk

Strangely enough the latest update from steinberg doesn't include pluginterfaces!
But if you find an older release should be ok...
here: https://github.com/R-Tur/VST_SDK_2.4

Now you should be able to build with:

premake5 gmake
and
make surge-vst2 (for debug mode)
or
make config=release_x64 surge-vst2
(for release mode.
***Release works for me only if use clang: premake5 --cc=clang gmake)
